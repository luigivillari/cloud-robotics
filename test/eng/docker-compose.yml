version: '3'
services:
  engine_node:
    image: ros:noetic-ros-base  # Immagine ROS Noetic di base
    container_name: ros_engine_node
    volumes:
      - ./engine.py:/home/engine.py  # Monta lo script locale nel container
    command: bash -c "source /opt/ros/noetic/setup.bash && python3 /home/engine.py"
    environment:
      - ROS_MASTER_URI=http://localhost:11312  # Configura una porta diversa per il ROS Master URI
      - ROS_HOSTNAME=localhost                 # Configura ROS Hostname
    networks:
      - ros_network
    ports:
      - "11312:11312"  # Espone la porta 11312 per il ROS Master

networks:
  ros_network:
    driver: bridge
